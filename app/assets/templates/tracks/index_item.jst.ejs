<% var author = track.author() %>

<div class="player-area-small group">

  <a href="#tracks/<%= track.get('id') %>">
    <% if (track.get('image_url')) { %>
      <img class="main" src="<%= track.get('image_url') %>" width="120" height="120" />
    <% } else { %>
      <img class="main" src="<%= author.get('image_url') %>" width="120" height="120" />
    <% } %>
  </a>

  <div class="player">
    <div class="info-and-buttons group">
      <button class="play-pause paused notLoaded">
        <div class="loading-animation">
          <span class="one"></span><span class="two"></span><span class="three"></span>
        </div>
      </button>
      <div class="name-details">
        <div class="display-name"><a href="#users/<%= author.get('id') %>"><%= author.escape('display_name') %></a></div>
        <br>
        <div class="track-title"><a href="#tracks/<%= track.get('id') %>"><%= track.escape('title') %></a></div>
      </div>
    </div>
    <br>
    <div id="audio-wave" class="small">
      <div id="progress-bar">
        <div class="progress-bar"></div>
      </div>
      <div class="track-times hidden">
        <div class="cursor-time"></div>
        <div class="end-time"></div>
      </div>
    </div>
  </div>
  <br>

</div>

<div class="comment-form-area">

</div>

<div class="info-and-buttons group">

  <% if (CloudSound.currentUser.isSignedIn()) { %>
    <button class="like-button"></button>
    <% if (CloudSound.currentUser.get('id') === author.get('id')) { %>
      <button class="delete-button"></button>
    <% } %>
  <% } %>

  <ul class="track-info group">
    <li class="plays-image"></li>
    <li class="plays-count"><%= track.get('plays') %></li>
    <li class="likes-image"></li>
    <li class="likes-count"><%= track.likes().length %></li>
    <li class="comments-image"></li>
    <li class="comments-count"><%= track.comments().length %></li>
  </ul>

</div>
